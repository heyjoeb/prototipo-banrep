!function(e,a,i,o){"use strict";i.Icon.Default.imagePath="images/";var r=new i.LatLngBounds(new i.LatLng(14.658129,-82.200288),new i.LatLng(12.400129,-79.866288)),t=i.map("map",{center:new i.LatLng(12.55673,-81.71852),zoom:14}),n=i.rectangle(r).getLatLngs();i.polyline(n.concat([n[0]])).addTo(t),t.setMaxBounds(r);var s=i.geoCsv(null,{fieldSeparator:";",firstLineTitles:!0,onEachFeature:function(e,a){var i="<h1>"+e.properties.popup+"</h1><img src="+e.properties.image+"><p>"+e.properties.text+"</p><p>"+e.properties.text2+"</p><p>"+e.properties.text3+"</p><p>"+e.properties.text4+"</p>",o={maxWidth:"280",className:"custom"};a.bindPopup(i,o)},pointToLayer:function(e,a){return i.marker(a,{icon:i.icon({iconUrl:e.properties.icon,iconSize:[32,32]})})}});$.ajax({type:"GET",dataType:"text",url:"../datos.csv",error:function(){alert("No se pudieron cargar los datos")},success:function(e){function a(e){var a="",i="",o="",r="";if("undefined"==typeof e[0])return null;if(e[0].constructor===Object)for(var t in e)for(var n in e[t])if("lat"===n&&(i=e[t][n]),"lng"===n&&(o=e[t][n]),"name"===n){r=e[t][n];var s=function(e){return e.replace(/[^a-z0-9-]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase()},c=s(r);a+="<li id="+c+'><a href="#"data-zoom="15"data-position='+i+","+o+">"+r+"</a></li>\r\n"}return a}s.addData(e),t.addLayer(s);var i=e,o={separator:";"},r=$.csv.toObjects(i,o),n=a(r);$("#csv-list").empty(),$("#csv-list").html(n),$("#csv-list li").each(function(){$(this).addClass("item-list")})}});var c="images/img03.png",g=[[13.373587513919782,-81.34616374969482],[13.398804155297157,-81.39500141143799]];i.imageOverlay(c,g).addTo(t);var l="images/img04.png",d=[[13.35838945541145,-81.34397506713867],[13.378848157085185,-81.39942169189453]];i.imageOverlay(l,d).addTo(t);var m="images/img05.png",p=[[13.336049912268548,-81.34320259094238],[13.359642078865688,-81.39890670776367]];i.imageOverlay(m,p).addTo(t);var u="images/img06.png",v=[[13.314292970650442,-81.35303020477295],[13.336885072551336,-81.40397071838379]];i.imageOverlay(u,v).addTo(t);var f="images/img07.png",h=[[12.576177454888787,-81.67845726013184],[12.601642692585052,-81.73154354095459]];i.imageOverlay(f,h).addTo(t);var y="images/img08.png",L=[[12.55163126686446,-81.68854236602783],[12.5773502516034,-81.74557685852051]];i.imageOverlay(y,L).addTo(t);var T="images/img09.png",w=[[12.528046290290643,-81.69098854064941],[12.553851410960164,-81.7478084564209]];i.imageOverlay(T,w).addTo(t);var k="images/img10.png",C=[[12.50429156675055,-81.69373512268066],[12.52997338535129,-81.7487096786499]];i.imageOverlay(k,C).addTo(t);var O="images/img11.png",x=[[12.479948040920366,-81.69845581054688],[12.50538089642164,-81.75141334533691]];i.imageOverlay(O,x).addTo(t);var b=new i.tileLayer("https://api.mapbox.com/styles/v1/heyjoeb/cio4kq5k6004xafm06nm1pg4g/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaGV5am9lYiIsImEiOiJjaW5vemYzeGgxMDUwdHZseXVicXZwbTAzIn0.7GJ_d9Xk-m50NUgRsOcnXg",{maxZoom:15,minZoom:14,useCache:!0,tileSize:512,zoomOffset:-1});b.on("tilecachehit",function(e){console.log("Cache hit: ",e.url)}),b.on("tilecachemiss",function(e){console.log("Cache miss: ",e.url)}),b.addTo(t),$("#seed").click(function(){b.seed(r,14,15)}),b.on("seedprogress",function(e){var a=100-Math.floor(e.remainingLength/e.queueLength*100);console.log("Seeding "+a+"% done")}),b.on("seedend",function(e){console.log("Cache seeding complete")});$("#sidebar").sidebar();a.getElementById("map-navigation").onclick=function(e){var a=e.target.getAttribute("data-position"),i=e.target.getAttribute("data-zoom");if(a&&i){var o=a.split(","),r=parseInt(i);return t.setView(o,r,{animation:!0}),!1}}}(window,document,L),$(document).ready(function(){var e=$("[data-remodal-id=modal]").remodal();e.open()}),function(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("service-worker.js").then(function(){console.log("CLIENT: service worker registration complete.")},function(){console.log("CLIENT: service worker registration failure.")})):console.log("CLIENT: service worker is not supported.")}(),$(window).load(function(){$(".sidebar-pane").mCustomScrollbar({theme:"rounded-dark"}),$("#csv-list li a").on("click",function(){$("li a.current").removeClass("current"),$(this).addClass("current")})});